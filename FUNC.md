–ö–æ—Ä–æ—Ç–∫–æ –∏ –ø–æ –¥–µ–ª—É ‚Äî —á—Ç–æ –¥–µ–ª–∞–µ—Ç –∫–∞–∂–¥–∞—è —Ñ—É–Ω–∫—Ü–∏—è –∏–∑ `dlfcn.h`, –∫–∞–∫–∏–µ —É –Ω–µ—ë –∞—Ä–≥—É–º–µ–Ω—Ç—ã –∏ —á—Ç–æ –æ–Ω–∞ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç:

---

## `dlopen`

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:**
–ó–∞–≥—Ä—É–∂–∞–µ—Ç —Ä–∞–∑–¥–µ–ª—è–µ–º—É—é –±–∏–±–ª–∏–æ—Ç–µ–∫—É (`.so`) –≤ –ø–∞–º—è—Ç—å –≤–æ –≤—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –ø—Ä–æ–≥—Ä–∞–º–º—ã.

**–°–∏–≥–Ω–∞—Ç—É—Ä–∞:**

```c
void *dlopen(const char *filename, int flags);
```

**–ê—Ä–≥—É–º–µ–Ω—Ç—ã:**

* `filename` ‚Äî –ø—É—Ç—å –∫ –±–∏–±–ª–∏–æ—Ç–µ–∫–µ (`"./lib2.so"`, `"libm.so.6"`, –∏–ª–∏ `NULL` ‚Äî —Ç–æ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Å–∞–º –∏—Å–ø–æ–ª–Ω—è–µ–º—ã–π —Ñ–∞–π–ª).
* `flags` ‚Äî —Ä–µ–∂–∏–º —Å–≤—è–∑—ã–≤–∞–Ω–∏—è, —á–∞—â–µ –≤—Å–µ–≥–æ:

  * `RTLD_LAZY` ‚Äî –∑–∞–≥—Ä—É–∂–∞—Ç—å, –Ω–æ —Ä–∞–∑—Ä–µ—à–∞—Ç—å —Å–∏–º–≤–æ–ª—ã —Ç–æ–ª—å–∫–æ –ø—Ä–∏ –ø–µ—Ä–≤–æ–º –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–∏
  * `RTLD_NOW` ‚Äî —Å—Ä–∞–∑—É —Ä–∞–∑—Ä–µ—à–∏—Ç—å –≤—Å–µ —Å–∏–º–≤–æ–ª—ã
  * `RTLD_GLOBAL` ‚Äî —Å–¥–µ–ª–∞—Ç—å —Å–∏–º–≤–æ–ª—ã –¥–æ—Å—Ç—É–ø–Ω—ã–º–∏ –¥–ª—è –¥—Ä—É–≥–∏—Ö –±–∏–±–ª–∏–æ—Ç–µ–∫
  * `RTLD_LOCAL` ‚Äî —Å–∏–º–≤–æ–ª—ã –≤–∏–¥–Ω—ã —Ç–æ–ª—å–∫–æ –≤ —ç—Ç–æ–π –±–∏–±–ª–∏–æ—Ç–µ–∫–µ (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é)

**–í–æ–∑–≤—Ä–∞—â–∞–µ–º–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ:**

* –£–∫–∞–∑–∞—Ç–µ–ª—å-–¥–µ—Å–∫—Ä–∏–ø—Ç–æ—Ä (handle) –±–∏–±–ª–∏–æ—Ç–µ–∫–∏ ‚Äî **–µ—Å–ª–∏ —É—Å–ø–µ—Ö**
* `NULL` ‚Äî **–µ—Å–ª–∏ –æ—à–∏–±–∫–∞** (—Ç–µ–∫—Å—Ç –æ—à–∏–±–∫–∏ –ø–æ–ª—É—á–∞—Ç—å —á–µ—Ä–µ–∑ `dlerror()`)

---

## `dlsym`

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:**
–ü–æ–ª—É—á–∞–µ—Ç –∞–¥—Ä–µ—Å —Ñ—É–Ω–∫—Ü–∏–∏ –∏–ª–∏ –≥–ª–æ–±–∞–ª—å–Ω–æ–π –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π –∏–∑ –∑–∞–≥—Ä—É–∂–µ–Ω–Ω–æ–π –±–∏–±–ª–∏–æ—Ç–µ–∫–∏.

**–°–∏–≥–Ω–∞—Ç—É—Ä–∞:**

```c
void *dlsym(void *handle, const char *symbol);
```

**–ê—Ä–≥—É–º–µ–Ω—Ç—ã:**

* `handle` ‚Äî —Ç–æ, —á—Ç–æ –≤–µ—Ä–Ω—É–ª `dlopen`
* `symbol` ‚Äî –∏–º—è —Ñ—É–Ω–∫—Ü–∏–∏ –∏–ª–∏ –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π (–Ω–∞–ø—Ä–∏–º–µ—Ä `"Pi"` –∏–ª–∏ `"Square"`)

**–í–æ–∑–≤—Ä–∞—â–∞–µ–º–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ:**

* –£–∫–∞–∑–∞—Ç–µ–ª—å –Ω–∞ —Å–∏–º–≤–æ–ª (`void*`) ‚Äî **–µ—Å–ª–∏ –Ω–∞–π–¥–µ–Ω**
* `NULL` ‚Äî **–µ—Å–ª–∏ –æ—à–∏–±–∫–∞** (–ø—Ä–æ–≤–µ—Ä—è—Ç—å —á–µ—Ä–µ–∑ `dlerror()`)

**–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:**

```c
float (*Pi)(int) = (float (*)(int)) dlsym(handle, "Pi");
```

---

## `dlclose`

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:**
–í—ã–≥—Ä—É–∂–∞–µ—Ç –±–∏–±–ª–∏–æ—Ç–µ–∫—É –∏–∑ –ø–∞–º—è—Ç–∏ (—É–º–µ–Ω—å—à–∞–µ—Ç —Å—á—ë—Ç—á–∏–∫ —Å—Å—ã–ª–æ–∫). –ï—Å–ª–∏ –æ–Ω —Å—Ç–∞–ª 0 ‚Äî –±–∏–±–ª–∏–æ—Ç–µ–∫–∞ —Ä–µ–∞–ª—å–Ω–æ –≤—ã–≥—Ä—É–∂–∞–µ—Ç—Å—è.

**–°–∏–≥–Ω–∞—Ç—É—Ä–∞:**

```c
int dlclose(void *handle);
```

**–ê—Ä–≥—É–º–µ–Ω—Ç—ã:**

* `handle` ‚Äî –¥–µ—Å–∫—Ä–∏–ø—Ç–æ—Ä –∏–∑ `dlopen`

**–í–æ–∑–≤—Ä–∞—â–∞–µ–º–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ:**

* `0` ‚Äî —É—Å–ø–µ—Ö
* `–Ω–µ 0` ‚Äî –æ—à–∏–±–∫–∞ (—Å–º–æ—Ç—Ä–µ—Ç—å `dlerror()`)

---

üí° **–í–∞–∂–Ω–æ –ø–æ–º–Ω–∏—Ç—å:**

1. –ü–æ—Å–ª–µ `dlclose` **–Ω–µ–ª—å–∑—è** –≤—ã–∑—ã–≤–∞—Ç—å —Ñ—É–Ω–∫—Ü–∏–∏ –∏–∑ —ç—Ç–æ–π –±–∏–±–ª–∏–æ—Ç–µ–∫–∏
2. –í—Å–µ–≥–¥–∞ –ø—Ä–æ–≤–µ—Ä—è–π –æ—à–∏–±–∫–∏ —á–µ—Ä–µ–∑:

```c
char *err = dlerror();
```

3. –î–ª—è –ø—Ä–æ–≥—Ä–∞–º–º—ã –Ω—É–∂–Ω–∞ –ª–∏–Ω–∫–æ–≤–∫–∞ —Å `-ldl`:

```bash
gcc program.c -ldl
```

---

–ï—Å–ª–∏ —Ö–æ—á–µ—à—å ‚Äî –º–æ–≥—É –¥–∞—Ç—å **–º–∏–Ω–∏–º–∞–ª—å–Ω—ã–π –ø—Ä–∏–º–µ—Ä –∫–æ–¥–∞** —Å `dlopen ‚Üí dlsym ‚Üí dlclose` –¥–ª—è —Ç–≤–æ–∏—Ö `Pi` –∏ `Square`.